# Unbind the default prefix key (Ctrl-b)
unbind C-b

# Set '\' as the new prefix key
set -g prefix C-k
bind C-k send-prefix

set -g base-index 0              # start index
set -g detach-on-destroy off     # don't exit from tmux when closing a session
set -g escape-time 0             # zero-out escape time delay
set -g history-limit 100000     # increase history size (from 2,000)
set -g renumber-windows off       # renumber all windows when any window is closed

set -g pane-active-border-style 'fg=magenta,bg=default'
set -g pane-border-style 'fg=brightblack,bg=default'
set -g display-time 2000

############################## NOT SURE ABOUT THESE ONES
set -g status-keys emacs
set -g focus-events on
# bind C-p previous-window
# bind C-n next-window
#############################

set -g status-interval 5

# Enable vim motions in copy mode
setw -g mode-keys vi

# Skip validation before killing
bind-key x kill-pane

# Binding to kill whole session (no confirmation)
bind X kill-session

# Split window vertically (|) and horizontally (-)
bind-key | split-window -h
bind-key - split-window -v


bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

bind-key -r H resize-pane -L 3
bind-key -r J resize-pane -D 3
bind-key -r K resize-pane -U 3
bind-key -r L resize-pane -R 3

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'sainnhe/tmux-fzf'
set -g @plugin 'wfxr/tmux-fzf-url'
set -g @plugin 'omerxx/tmux-sessionx'
set -g @plugin 'fcsonline/tmux-thumbs'
# set -g @plugin 'omerxx/tmux-floax'
set -g @plugin 'tmux-plugins/tmux-cpu'
set -g @plugin 'tmux-plugins/tmux-battery'
set -g @plugin 'christoomey/vim-tmux-navigate'

set -g @thumbs-contrast 1

# set -g @floax-width '80%'
# set -g @floax-height '80%'
# set -g @floax-border-color 'magenta'
# set -g @floax-text-color 'blue'
# set -g @floax-bind '\'
# set -g @floax-change-path 'false'

# Key bindings
unbind p 
bind p previous-window
unbind s
set -g @sessionx-bind 's'
bind r source-file ~/.tmux.conf \; display "Reloaded ~/.tmux.conf"

# Default window format (inactive windows)
# This will show: [index name] (e.g., "[0 shell]" or "[3 k9s]")
set-window-option -g window-status-format '#[fg=brightblack,bg=default] #I #W '

# Current window format (active window)
# This will show: >[index name]< (e.g., ">0 lazygit<") with a different color
# You might need a Nerd Font installed for the '' or '' symbols to render correctly.
# If you don't have a Nerd Font, you can use simpler arrows like `->` and `<-`.
set-window-option -g window-status-current-format '#[fg=default,bg=default,nobold,noitalics,nounderscore]#[fg=magenta,bg=default] #[fg=black,bg=magenta,bold]#I #W #[fg=magenta,bg=default]'


# Hook for new session: Pre-create 9 windows with specific names and commands
set-hook -g session-created ' \
    send-keys "lazygit" C-m; \
    new-window -d -n "shell"; \
    new-window -d -n "shell"; \
    new-window -d -n "k9s" "k9s"; \
    new-window -d -n "claude" "claude"; \
    new-window -d -n "yazi" "yazi"; \
    new-window -d -n "btop" "btop"; \
    new-window -d -n "shell"; \
    select-window -t 1; \
'

# Automatic window renaming (useful for general purpose windows)
setw -g automatic-rename on
set-option -g automatic-rename-format '#{pane_current_command}'


# Options to make tmux more pleasant
set -g mouse on
set -g default-terminal "tmux-256color"

# # Configure the catppuccin plugin
# set -g @catppuccin_flavor "mocha"
# # set -g @catppuccin_window_status_style "rounded"

# # Load catppuccin. NOT USING TPM BECAUSE OF NAMESPACE CONFLICT ACCORDING TO THE AUTHORS
# run ~/.tmux/plugins/catppuccin/catppuccin.tmux

# Make the status line pretty and add some modules
set -g status-right-length 100
set -g status-left-length 100
set -g status-left ""
# Only include uptime and session name
set -g status-right "#[fg=white,bg=default] #{uptime} | #{session_name} "

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
